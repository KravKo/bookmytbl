<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
    <div class="container mt-1">
        <table class="table table-dark">
            <thead>
                <th>Id</th>
                <th>name</th>
                <th>Phone</th>
                <th>email</th>
                <th>type</th>
                <th>address</th>
                <th>number of people</th>
                <th>date</th>
                <th>time</th>
                <th>message</th>
            </thead>
            <tbody id="tbody1"></tbody>
        </table>
    </div>

    <script type="module">
        console.log("working")
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use // https://firebase.google.com/docs/web/setup#available-libraries
        // Your web app's Firebase configuration 
        const firebaseConfig = {
            apiKey: "AIzaSyC6iNCA4vaVVe66EP99xQOzYWiB_E9lInA",
            authDomain: "tablebook-8db32.firebaseapp.com",
            projectId: "tablebook-8db32",
            storageBucket: "tablebook-8db32.appspot.com", 
            messagingSenderId:"643803141397",
            appId: "1:643803141397:web:44568c7704843a2ef1051c"
        };
         // Initialize Firebase 
        const app = initializeApp(firebaseConfig); 
        import { getDatabase, ref, set, child, update, push, remove, get, onValue } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-database.js";
        // Initialize Realtime Database and get a reference to the service 
        const db = getDatabase();



        var tbody = document.getElementById('tbody1');
        function AddItemsToTable(userId, username, number, email, type, address, numberofpeople, date, time, message) {

            var trow = document.createElement('tr');
            var td1 = document.createElement('td');
            var td2 = document.createElement('td');
            var td3 = document.createElement('td');
            var td4 = document.createElement('td');
            var td5 = document.createElement('td');
            var td6 = document.createElement('td');
            var td7 = document.createElement('td');
            var td8 = document.createElement('td');
            var td9 = document.createElement('td');
            var td10 = document.createElement('td');


            td1.innerHTML = userId;
            td2.innerHTML = username;
            td1.innerHTML = number;
            td2.innerHTML = email;
            td1.innerHTML = type;
            td2.innerHTML = address;
            td1.innerHTML = numberofpeople;
            td2.innerHTML = date;
            td1.innerHTML = time;
            td2.innerHTML = message;




            trow.appendChild(td1);
            trow.appendChild(td2);
            trow.appendChild(td3);
            trow.appendChild(td4);
            trow.appendChild(td5);
            trow.appendChild(td6);
            trow.appendChild(td7);
            trow.appendChild(td8);
            trow.appendChild(td9);
            trow.appendChild(td10);




            tbody.appendChild(trow);
        }
        function AddAllItemsToTable(users) {
            tbody.innerHTML = ""; 
            users.forEach(element => {
                AddItemsToTable( element.email, element.type,
                 element.address, element.numberofpeople, element.date, element.time, element.message, element.userId, element.username);
            })
        }

        function GetAllDataOnce() {
            const dbRef = ref(db); 
            get(child(dbRef, "users"))
            .then((snapshot) => {
                var userss = [];
                snapshot.forEach(childSnapshot => {
                    userss.push(childSnapshot.val());
                });
                AddAllItemsToTable(userss);
            })
        }
        window.onload = GetAllDataOnce;



    </script>

td2.innerHTML = address;
td1.innerHTML = numberofpeople;
td2.innerHTML = date;
td1.innerHTML = time;
td2.innerHTML = message;

</body>

</html>